# README: create_file_cards_from_json.py

## Description
`create_file_cards_from_json.py` is a Python script designed to process JSON files generated by Instagram's activity download feature. The script generates image-based file cards for each media item described in the JSON file and organizes them into a PDF. This tool is particularly useful for visualizing and archiving Instagram activity data, such as posts, stories, reels, and other media.

---

## Arguments

### Required Arguments:
- `--input-json`
  - **Description**: Path to the input JSON file containing Instagram activity data.
  - **Example**: `--input-json path/to/your/instagram_data.json`

- `--image-base-dir`
  - **Description**: Base directory where the media files referenced in the JSON are stored.
  - **Example**: `--image-base-dir path/to/media/files`

### Optional Arguments:
- `--output-dir`
  - **Description**: Directory to save the generated file cards and PDFs.
  - **Default**: A directory named after the JSON file and page size.
  - **Example**: `--output-dir path/to/output`

- `--cmyk-mode`
  - **Description**: Generate file cards in CMYK color mode (useful for print).
  - **Default**: Disabled.
  - **Example**: `--cmyk-mode`

- `--page-size`
  - **Description**: Page size for the generated file cards (e.g., A4, LETTER, LARGE_TAROT).
  - **Default**: `LARGE_TAROT`.
  - **Example**: `--page-size A4`

- `--pdf-output-name`
  - **Description**: Name of the output PDF file.
  - **Default**: Automatically generated based on the input JSON name and page size.
  - **Example**: `--pdf-output-name my_archive.pdf`

- `--delete-cards-after-pdf`
  - **Description**: Delete individual card files after the PDF is created.
  - **Default**: Disabled.
  - **Example**: `--delete-cards-after-pdf`

- `--border-color`
  - **Description**: Border color for the cards in RGB format.
  - **Default**: `250,250,250` (light gray).
  - **Example**: `--border-color 255,0,0` (red border).

- `--border-inch-width`
  - **Description**: Border width in inches.
  - **Default**: `0.125`.
  - **Example**: `--border-inch-width 0.25`

- `--include-video-frames`
  - **Description**: Include individual video frames as cards.
  - **Default**: Disabled.
  - **Example**: `--include-video-frames`

- `--exclude-file-path`
  - **Description**: Exclude the file path from being displayed on the card.
  - **Default**: Displayed.
  - **Example**: `--exclude-file-path`

- `--cards-per-chunk`
  - **Description**: Number of cards per chunk. If set, the script splits the cards into multiple PDFs.
  - **Default**: `0` (no chunking).
  - **Example**: `--cards-per-chunk 100`

---

## How the Script Handles Instagram JSON Files

### Input JSON Structure:
The script processes JSON files generated by Instagram's activity download feature. These files typically contain metadata about posts, stories, reels, and other media. The script supports the following keys:

- `ig_stories`: Contains metadata for Instagram stories.
- `ig_other_media`: Contains metadata for other media types.
- `ig_reels`: Contains metadata for Instagram reels.
- `ig_igtv_media`: Contains metadata for IGTV videos.
- `ig_archived_posts`: Contains metadata for archived posts.

If none of these keys are present, the script assumes the JSON contains a list of posts.

### Sorting:
- **Stories**: Sorted by the `creation_timestamp` field.
- **Posts**: Sorted by the `creation_timestamp` of the first media item in the `media` array.

### Media Handling:
- The script reads the `uri` field in the JSON to locate the corresponding media file in the `image-base-dir`.
- If the media file is missing or the `uri` is invalid, the script logs a warning and skips the item.

### Output:
- **File Cards**: Each media item is converted into a visually appealing file card with metadata such as title, creation timestamp, and file path.
- **PDF**: The file cards are assembled into a PDF. If chunking is enabled, multiple PDFs are created.

---

## Example Usage

### Basic Usage:
```bash
python3 create_file_cards_from_json.py \
  --input-json path/to/instagram_data.json \
  --image-base-dir path/to/media/files
```

### Advanced Usage:
```bash
python3 create_file_cards_from_json.py \
  --input-json path/to/instagram_data.json \
  --image-base-dir path/to/media/files \
  --output-dir path/to/output \
  --cmyk-mode \
  --page-size A4 \
  --pdf-output-name my_archive.pdf \
  --delete-cards-after-pdf \
  --border-color 255,0,0 \
  --cards-per-chunk 100
```

```bash
python3 create_file_cards_from_json.py --input-json '/Users/julian/Desktop/OMATA_IG_08202025/your_instagram_activity/media/stories.json' --image-base-dir '/Users/julian/Desktop/OMATA_IG_08202025/' --output-dir '/Volumes/Crucial X10/OMATA_IG_08202025/omata-instagram-cards/STORIES/' --page-size 5.75x8.75 --cmyk-mode --delete-cards-after-pdf --border-inch-width 0.15 --border-color '210, 255, 66' --cards-per-chunk 520
```

---

## Logging
The script logs detailed information about its progress, including:
- JSON file loading.
- Media file processing.
- File card generation.
- PDF assembly.

Errors and warnings are logged to help identify issues, such as missing media files or invalid JSON structures.